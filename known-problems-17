==============================
Known Problems in Gnatcoll 1.7
==============================

Copyright (C) 2013-2015, AdaCore

KP-17-O827-012 GNATCOLL.VFS.Writable_File does not preserve permissions

  Problem:    When overwriting a file via a Writable_File, GNATCOLL first
              saves to a temporary file that is then moved over the original
              file. This is a safer way, but GNATCOLL did not preserve the
              original file's permissions (read/write/exec). The fix
              requires GNAT more recent than 20150901.

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-09-29

  Workaround: Use lower-level functions to write and save files (GNAT.OS_Lib)

KP-17-O730-027 gnatinspect crashes on enum types with character literals

  Problem:    When you define an enumeration type with character literals
              (as in type Foo is ('1', '2')), the resulting .ali file
              generated by the compiler cannot be parsed by gnatinspect.

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-08-13

  Workaround: None.

KP-17-O618-010 GNATCOLL.VFS.Create_From_Dir issue with parent path

  Problem:    When the Basename parameter receives a name that starts with
              "../..", the resulting full name will be incorrect (only one
              level up). A similar issue might happen when normalizing file
              names via Full_Name and the name starts with "../..".

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-06-18

  Workaround: Concatenate the directory's name and the base name directly,
              and then call Create_From_Directory passing Get_Current_Dir
              as the name of the directory.

KP-17-O522-023 SQL.Exec: prepared statements are now task safe

  Problem:    Prepared statements, like all SQL statements in GNATCOLL, are
              based on Ada2012 containers. However, these are not task safe
              by default, since even read-only access requires modifying some
              bits in the container for tampering checks. This means that
              using a prepared statement (read-only) from multiple tasks could
              eventually end up leaving the bits set and thus prevent any
              further read on the container/statement.

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-05-25

  Workaround: The actual fix really depends on a change in the GNAT runtime,
              which now allows disabling tampering checks on containers.

KP-17-O518-005 Traces: indentation is specific to each stream

  Problem:    Each Trace_Handle output can be directed to a specific stream
              (a file, stdout,...). But using Increase_Indent would increment
              the indentation for all streams, instead of the specific
              stream, which could result in strange output in some cases.

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-05-18

  Workaround: None. Most of the time, applications use a single stream in
              any case (a log file).

KP-17-O507-023 Projects: parsing of library aggregate projects

  Problem:    A number of issues related to the loading of library aggregate
              projects were fixed, in particular when the aggregated projects
              have homonyms.

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-05-12

  Workaround: None.

KP-17-O203-001 Postgresql: Insert_and_Get_PK fails with string prepared query

  Problem:    When you use a Prepared_Statement for a query given as a string,
              and use that in a Insert_and_Get_PK call, Gnatcoll generates an
              invalid query and postgreSQL complains.

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-02-04

  Workaround: Send an INSERT statement ending with " RETURNING id" via
              Execute, and use the Last_Id function to get the actual id.

KP-17-O130-001 Postgresql: show full error message when connection fails

  Problem:    When the connection to the database fails, the specific
              message from the server (like "invalid port number") is not
              available to the application.

  Status:     Fixed in Gnatcoll 1.8.0. on 2015-01-30

  Workaround: Test the connection string (which is part of the error message)
              by using the command line client psql.

KP-17-O126-034 GNATCOLL.Projects.Other_File and separate units

  Problem:    The Other_File for a separate unit (say 'parent-child.adb')
              is returned incorrectly as 'parent-child.ads', whereas it
              should be 'parent.ads'.

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-01-28

  Workaround: Use Info to get the name of the unit and get the file name
              for the parent unit.

KP-17-O114-020 GNATCOLL.JSON not quoting control characters

  Problem:    When adding a string that contains control characters (like
              ctrl-Z), the resulting JSON is not parsed correctly in some
              cases (for instance Firefox).

  Status:     Fixed in Gnatcoll 1.8.0 on 2015-01-19

  Workaround: Do a second pass on the string and escape such characters with
              GNATCOLL.JSON.Utility.Escape_Non_Print_Character.

KP-17-NB11-001 In_Transaction returns True without automatic transactions

  Problem:    If you disable automatic handling of transactions in
              GNATCOLL.SQL.Exec, the function In_Transaction always returns
              True.

  Status:     Fixed in Gnatcoll 1.8.0 on 2014-11-13

  Workaround: In this mode, GNATCOLL does not send BEGIN or COMMIT commands
              automatically, so your application can in fact keep track of
              whether it started a transaction explicitly.

KP-17-NA29-019 GNATCOLL.Projects.Info_Set does not set file information

  Problem:    Using Info_Set to retrieve information a source file (unit
              name, language,...) will not set the file name in the result.
              This differs from what GNATCOLL.Projects.Info does.

  Status:     Fixed in Gnatcoll 1.8.0 on 2014-11-06

  Workaround: The file was passed as a parameter to Info_Set, so it is in
              general available to the code.

KP-17-L908-006 GNATCOLL.Projects use '/' instead of '\' when editing

  Problem:    When editing a project on Windows and changing a directory
              name, the project would be modified to use backslashes as
              directory separators. As a result, the project would work
              fine on Windows, but no longer work on other platforms.
              Using slashes ensures that projects are more portable.

  Status:     Fixed in Gnatcoll 1.8.0 on 2014-12-08

  Workaround: Manually edit the project afterward if you need to use it
              on Unix or OSX machines.
